# Настоящий документ предназначен для внешних разработчиков и описывает процесс разработки устройста, совместимого с проектом "Школьная лаборатория"
***
## [Соглашение о терминах](/terms-convention.md)
***
## Содержание
* [Цель документа](#цель-документа)
* [Общее описание мультисенсора](#общее-описание-мультисенсора)
* [Характеристики мультисенсора](#характеристики-мультисенсора)
* [Этап 1: определиться с датчиками и их характеристиками, составить спецификации](#этап-1-определиться-с-датчиками-и-их-характеристиками-составить-спецификации)
* [Этап 2: формирование спецификаций для датчков](#этап-2-формирование-спецификаций-для-датчиков)
* [Этап 3: разработка схемотехники](#этап-3-разработка-схемотехники)
* [Этап 4: программирование центрального микроконтроллера](#этап-4-программирование-центрального-микроконтроллера)
***
## Цель документа
Целью данного документа является предоставление внешнему разработчику алгоритма действий, по которому можно разработать новый мультисенсор и добавить этот мультисенсор в главное приложение  
[К содержанию](#содержание)
***
## Общее описание мультисенсора
Мультисенсор устроен следующим образом:  
<p align="center">
  <img src="/related-documents/diagrams/device-block-diagram.png">
</p>

Мультисенсор состоит из двух блоков: блок MASTER и блок SENSORS. Внешний разработчик разрабатывает блок SENSORS, далее добавляет к нему уже готовую схемотехнику блока MASTER и получает готовое устройство. Задача блок SENSORS - работа с физическими датчиками S и передача их значений блоку MASTER посредством [протокола](/protocol-description.md). Всю работу по "общению" с приложением выполняет блок MASTER.  
  
[К содержанию](#содержание)
***
## Характеристики мультисенсора
* количество физических датчиков у блока SENSORS - от 1 и выше;
* количество каналов измерения в рамках одного физического датчика - от 1 и выше (например, акселерометр - трёхканальный);
* физический интерфейс для подключения блока SENSORS к блоку MASTER - UART в дуплексном режиме, скорость 115200, 8n1.  
  
[К содержанию](#содержание)
***
## Этапы разработки
***
## Этап 1: определиться с датчиками и их характеристиками, составить спецификации
На этом этапе необходимо составить таблицы с характеристиками для каждого датчика, применяемого в новом мультисенсоре. Датчики могут быть:
* с одной осью Y и одним каналом измерения - тип 1;
* с одной осью Y и несколькими каналами измерения - тип 2;
* с несколькими осями Y и одним каналом измерения  - тип 3;
* с несколькими осями Y и несколькими каналами измерения - тип 4.  
Таблицы в формате markdown присылаются нам в виде PullRequest по [адресу](/sensor-parameter-tables), после чего проверяются инженером и, в случае отсутствия проблем, PullRequest принимается и содержимое таблиц появляется в данном репозитории. Именование таблиц - первые восемь символов UUID-а. Пример: 'ba575001.md'  
Далее необходимо на основе этих таблиц составить json-спецификации. За основу следует брать [json-схему](/specifications/schema/sensor.schema.json)



**Пример для типа 1 - датчик температуры**

| Параметр                                 | Значение                             | 
|------------------------------------------|--------------------------------------|
| Название датчика                         | Температура                          |
| UUID датчика                             | ba575001-eca0-11ec-8ea0-1337ac062022 |
| Количество осей по Y                     | 1                                    |
| Единицы измерения для оси Y              | °C                                   |
| Заголовок оси Y                          | Температура                          |
| Количество диапазонов измерения по оси Y | 2                                    |
| Диапазон 1: индекс                       | 0                                    |
| Диапазон 1: минимальное значение         | -100                                 |
| Диапазон 1: максимальное значение        | 1000                                 |
| Диапазон 2: индекс                       | 1                                    |
| Диапазон 2: минимальное значение         | -40                                  |
| Диапазон 2: максимальное значение        | -360                                 |
| Количество каналов измерения             | 1                                    |



[К содержанию](#содержание)
***
## Этап 2: формирование спецификаций для датчиков
На данном этапе происходит формирование json-спецификаций на основе предыдущих таблиц. Этим занимается наш инженер. Поэтому, внешние разработчики могут сразу переходить к следующему этапу

[К содержанию](#содержание)
***
## Этап 3: разработка схемотехники
Внешний разработчик производит разработку схемотехники, взяв за основу [референс](/circuit-design-requirements.md). На данном этапе можно написать программу для периферийного микроконтроллера и предварительно отладить MODULE

[К содержанию](#содержание)
***
## Этап 4: программирование центрального микроконтроллера
Пока внешний разработчик выполняет предыдущий этап, наш инженер дописывает необходимый код для центрального контроллера и главного приложения, проверяет работу на эмуляторе MODULE и выпускает новый релиз программы. Также инженер на основе этого релиза выпускает новую версию приложения для прошивки центрального контроллера. Внешний разработчик, получив это приложение, должен выполнить следующие действия...


[К содержанию](#содержание)
***
